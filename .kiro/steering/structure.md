# プロジェクト構造

## ディレクトリ構成

```
src/
├── app/                    # Next.js App Router
│   ├── __tests__/         # アプリレベルテスト
│   ├── globals.css        # グローバルスタイル
│   ├── layout.tsx         # ルートレイアウトコンポーネント
│   └── page.tsx           # ホームページコンポーネント
├── components/            # 再利用可能UIコンポーネント
│   ├── __tests__/         # コンポーネントテスト
│   ├── EmptyState.tsx     # 空状態表示
│   ├── ThemeProvider.tsx  # テーマコンテキストプロバイダー
│   ├── ThemeToggle.tsx    # テーマ切り替えコンポーネント
│   ├── TodoApp.tsx        # メインTodoアプリケーション
│   ├── TodoForm.tsx       # Todo入力フォーム
│   ├── TodoItem.tsx       # 個別Todoアイテム
│   └── TodoList.tsx       # Todoアイテムコンテナ
├── hooks/                 # カスタムReactフック
│   ├── __tests__/         # フックテスト
│   ├── index.ts           # フックエクスポート
│   └── useTheme.ts        # テーマ管理フック
├── types/                 # TypeScript型定義
│   ├── index.ts           # 型エクスポート
│   ├── theme.ts           # テーマ関連型
│   └── todo.ts            # Todo関連型
└── utils/                 # ユーティリティ関数
    ├── __tests__/         # ユーティリティテスト
    ├── index.ts           # ユーティリティエクスポート
    ├── storage.ts         # localStorage操作
    ├── theme.ts           # テーマユーティリティ
    ├── uuid.ts            # UUID生成
    └── validation.ts      # 入力バリデーション
```

## アーキテクチャパターン

### コンポーネント構成

- **アトミックデザイン**: 複雑さと再利用性によるコンポーネント整理
- **コンテナ/プレゼンテーション**: `TodoApp`が状態管理、子コンポーネントが表示処理
- **コンポジション**: コンポーネントがchildrenを受け取り合成される

### 状態管理

- **ローカル状態**: コンポーネント固有状態にReact `useState`
- **コンテキスト**: React Contextでテーマ状態共有
- **永続化**: データ永続化にlocalStorage

### ファイル命名規則

- **コンポーネント**: PascalCase（例: `TodoApp.tsx`）
- **フック**: `use`プレフィックス付きcamelCase（例: `useTheme.ts`）
- **ユーティリティ**: camelCase（例: `storage.ts`）
- **型**: camelCase（例: `todo.ts`）
- **テスト**: ソースファイルに`.test.tsx`サフィックス

### インポート/エクスポートパターン

- **バレルエクスポート**: クリーンなインポートのため`index.ts`ファイル使用
- **パスマッピング**: srcインポートに`@/`エイリアス使用
- **名前付きエクスポート**: ユーティリティはデフォルトエクスポートより名前付きエクスポート優先
- **デフォルトエクスポート**: Reactコンポーネントに使用

### テスト構造

- **コロケーション**: テストはソースコード隣の`__tests__`フォルダに配置
- **命名**: テストファイルは`.test.tsx`拡張子でソースファイル名をミラー
- **モック**: 外部依存関係（localStorage、crypto）を`jest.setup.js`でモック
- **カバレッジ**: レイアウトファイルと型定義をカバレッジから除外

### コード整理原則

- **単一責任**: 各ファイルは明確な目的を一つ持つ
- **依存関係の方向**: コンポーネントは型とユーティリティに依存、逆は不可
- **機能グループ化**: 関連機能をまとめて配置
- **テスト近接**: メンテナンスしやすいよう実装に近くテスト配置
