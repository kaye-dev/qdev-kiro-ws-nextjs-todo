# 設計文書

## 概要

Next.js 15とReact 19を使用したシンプルなTodoアプリケーションを設計します。クライアントサイドでの状態管理を中心とし、TailwindCSS v4を活用してレスポンシブなUIを実装します。アプリケーションは単一ページで動作し、ローカルストレージを使用してデータの永続化を行います。

## アーキテクチャ

### 技術スタック

- **フロントエンド**: Next.js 15.4.6 (App Router)
- **UIライブラリ**: React 19.1.0
- **スタイリング**: TailwindCSS v4
- **言語**: TypeScript
- **状態管理**: React Hooks (useState, useEffect)
- **データ永続化**: ローカルストレージ

### アーキテクチャパターン

- **コンポーネントベースアーキテクチャ**: 再利用可能なReactコンポーネントで構成
- **単一責任の原則**: 各コンポーネントは特定の機能に特化
- **状態の局所化**: 必要最小限のスコープで状態を管理

## コンポーネントとインターフェース

### コンポーネント構造

```
src/app/
├── page.tsx (メインページ)
├── components/
│   ├── TodoApp.tsx (メインコンテナ)
│   ├── TodoForm.tsx (タスク追加フォーム)
│   ├── TodoList.tsx (タスクリスト表示)
│   ├── TodoItem.tsx (個別タスクアイテム)
│   └── EmptyState.tsx (空状態表示)
└── types/
    └── todo.ts (型定義)
```

### コンポーネント詳細

#### TodoApp.tsx

- **責任**: アプリケーション全体の状態管理とレイアウト
- **状態**: タスクリスト配列
- **機能**: タスクの追加、更新、削除、ローカルストレージとの同期

#### TodoForm.tsx

- **責任**: 新しいタスクの入力と追加
- **Props**: onAddTodo関数
- **状態**: 入力フィールドの値
- **機能**: フォーム送信、バリデーション、入力クリア

#### TodoList.tsx

- **責任**: タスクリストの表示とレンダリング
- **Props**: タスク配列、更新・削除関数
- **機能**: タスクの一覧表示、空状態の処理

#### TodoItem.tsx

- **責任**: 個別タスクの表示と操作
- **Props**: タスクオブジェクト、更新・削除関数
- **機能**: 完了状態の切り替え、削除操作

#### EmptyState.tsx

- **責任**: タスクが存在しない場合の表示
- **機能**: ユーザーガイダンスメッセージの表示

## データモデル

### Todo型定義

```typescript
interface Todo {
  id: string;          // 一意識別子 (UUID)
  text: string;        // タスクテキスト
  completed: boolean;  // 完了状態
  createdAt: Date;     // 作成日時
}
```

### 状態管理

```typescript
// メイン状態
const [todos, setTodos] = useState<Todo[]>([]);

// フォーム状態
const [inputValue, setInputValue] = useState<string>('');
```

## エラーハンドリング

### バリデーション

- **空文字チェック**: タスクテキストが空の場合はエラーメッセージを表示
- **文字数制限**: 最大200文字の制限を設定
- **重複チェック**: 同一テキストのタスクの重複を防止

### エラー表示

- **インラインエラー**: フォーム下部にエラーメッセージを表示
- **視覚的フィードバック**: エラー時は入力フィールドを赤色でハイライト
- **自動クリア**: 正常入力時にエラーメッセージを自動削除

### ローカルストレージエラー

- **読み込みエラー**: 破損データの場合は空配列で初期化
- **保存エラー**: 容量不足等の場合はコンソールにログ出力

## テスト戦略

### 単体テスト

- **コンポーネントテスト**: 各コンポーネントの独立したテスト
- **関数テスト**: ユーティリティ関数のテスト
- **型テスト**: TypeScript型定義の検証

### 統合テスト

- **ユーザーフローテスト**: タスクの追加→完了→削除の一連の流れ
- **ローカルストレージテスト**: データの永続化と復元
- **レスポンシブテスト**: 異なる画面サイズでの動作確認

### テストツール

- **Jest**: 単体テスト・統合テストフレームワーク
- **React Testing Library**: Reactコンポーネントのテスト
- **@testing-library/user-event**: ユーザーインタラクションのシミュレーション

## UIデザイン仕様

### レイアウト

- **中央配置**: コンテンツを画面中央に配置
- **最大幅**: デスクトップで600px、モバイルで画面幅の90%
- **余白**: 適切なパディングとマージンで読みやすさを確保

### カラーパレット

- **プライマリ**: Blue-500 (#3B82F6) - 追加ボタン、チェックボックス
- **セカンダリ**: Gray-600 (#4B5563) - テキスト
- **危険**: Red-500 (#EF4444) - 削除ボタン、エラー
- **成功**: Green-500 (#10B981) - 完了状態
- **背景**: White/Gray-900 (ライト/ダークモード対応)

### タイポグラフィ

- **見出し**: text-2xl font-bold
- **本文**: text-base
- **小文字**: text-sm
- **フォント**: システムフォント (font-sans)

### インタラクション

- **ホバー効果**: ボタンとクリック可能要素にホバー状態
- **フォーカス**: キーボードナビゲーション対応
- **アニメーション**: 状態変更時の滑らかなトランジション
- **タッチ対応**: モバイルデバイスでの適切なタッチターゲットサイズ

### レスポンシブデザイン

- **ブレークポイント**: sm (640px), md (768px), lg (1024px)
- **モバイルファースト**: 小画面から大画面への段階的拡張
- **フレキシブルレイアウト**: Flexboxを活用した柔軟なレイアウト
